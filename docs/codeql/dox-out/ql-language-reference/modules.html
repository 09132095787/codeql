
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Modules &#8212; CodeQL</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Signatures" href="signatures.html" />
    <link rel="prev" title="Types" href="types.html" />

<title>CodeQL docs</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="../_static/custom.css" type="text/css" />
<link rel="stylesheet" href="../_static/primer.css" type="text/css" />


  </head><body>
<header class="Header">
    <div class="Header-item--full">
        <a href="https://codeql.github.com/docs" class="Header-link f2 d-flex flex-items-center">
            <!-- <%= octicon "mark-github", class: "mr-2", height: 32 %> -->
            <svg height="32" class="octicon octicon-mark-github mr-2" viewBox="0 0 16 16" version="1.1" width="32"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z">
                </path>
            </svg>
            <span class="hide-sm">CodeQL documentation</span>
        </a>
    </div>
    <div class="Header-item hide-sm hide-md">
        <script src="https://addsearch.com/js/?key=93b4d287e2fc079a4089412b669785d5&categories=!0xhelp.semmle.com,0xcodeql.github.com,1xdocs,1xcodeql-standard-libraries,1xcodeql-query-help"></script>
    </div>
    <div class="Header-item">

        <details class="dropdown details-reset details-overlay d-inline-block">
            <summary class="btn bg-gray-dark text-white border" aria-haspopup="true">
                CodeQL resources
                <div class="dropdown-caret"></div>
            </summary>

            <ul class="dropdown-menu dropdown-menu-se dropdown-menu-dark">
                <li><a class="dropdown-item" href="https://codeql.github.com/docs/codeql-overview">CodeQL overview</a></li>
                <li class="dropdown-divider" role="separator"></li>
                <div class="dropdown-header">
                    CodeQL tools
                </div>
                <li><a class="dropdown-item" href="https://codeql.github.com/docs/codeql-for-visual-studio-code">CodeQL for VS Code</a>
                <li><a class="dropdown-item" href="https://codeql.github.com/docs/codeql-cli">CodeQL CLI</a>
                </li>
                <li class="dropdown-divider" role="separator"></li>
                <div class="dropdown-header">
                    CodeQL guides
                </div>
                <li><a class="dropdown-item" href="https://codeql.github.com/docs/writing-codeql-queries">Writing CodeQL queries</a></li>
                <li><a class="dropdown-item" href="https://codeql.github.com/docs/codeql-language-guides">CodeQL language guides</a>
                <li class="dropdown-divider" role="separator"></li>
                <div class="dropdown-header">
                    Reference docs
                </div>
                <li><a class="dropdown-item" href="https://codeql.github.com/docs/ql-language-reference/">QL language
                        reference</a>
                <li><a class="dropdown-item" href="https://codeql.github.com/codeql-standard-libraries">CodeQL
                        standard-libraries</a>
                <li><a class="dropdown-item" href="https://codeql.github.com/codeql-query-help">CodeQL
                        query help</a>
                <li class="dropdown-divider" role="separator"></li>
                <div class="dropdown-header">
                    Source files
                </div>
                <li><a class="dropdown-item" href="https://github.com/github/codeql">CodeQL repository</a>
            </ul>
        </details>

    </div>

</header>
<main class="bg-gray-light clearfix">
<nav class="SideNav position-sticky top-0 col-lg-3 col-md-3 float-left p-4 hide-sm hide-md overflow-y-auto">

    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../codeql-overview/index.html">CodeQL overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../codeql-for-visual-studio-code/index.html">CodeQL for Visual Studio Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../codeql-cli/index.html">CodeQL CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../writing-codeql-queries/index.html">Writing CodeQL queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../codeql-language-guides/index.html">CodeQL language guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">QL language reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="about-the-ql-language.html">About the QL language</a></li>
<li class="toctree-l2"><a class="reference internal" href="predicates.html">Predicates</a></li>
<li class="toctree-l2"><a class="reference internal" href="queries.html">Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">Types</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="signatures.html">Signatures</a></li>
<li class="toctree-l2"><a class="reference internal" href="aliases.html">Aliases</a></li>
<li class="toctree-l2"><a class="reference internal" href="variables.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="expressions.html">Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="formulas.html">Formulas</a></li>
<li class="toctree-l2"><a class="reference internal" href="annotations.html">Annotations</a></li>
<li class="toctree-l2"><a class="reference internal" href="recursion.html">Recursion</a></li>
<li class="toctree-l2"><a class="reference internal" href="lexical-syntax.html">Lexical syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="name-resolution.html">Name resolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="evaluation-of-ql-programs.html">Evaluation of QL programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="ql-language-specification.html">QL language specification</a></li>
</ul>
</li>
</ul>


</nav>


<div class="body col-sm-12 col-md-9 col-lg-9 float-left border-left">

    <div class="hide-lg hide-xl px-4 pt-4">
        
<div class="related" role="navigation" aria-label="related navigation">
    <ul>
        <li class="nav-item nav-item-0"><a href="../contents.html">CodeQL</a> &#187;</li>
        <li class="nav-item nav-item-1"><a href="index.html"
                accesskey="U">QL language reference</a> &#187;</li> 
    </ul>
</div>
    </div>

    <article class="p-4 col-lg-10 col-md-10 col-sm-12">
        
  <div class="section" id="modules-1">
<span id="modules"></span><h1>Modules<a class="headerlink" href="#modules-1" title="Permalink to this headline">¶</a></h1>
<p>Modules provide a way of organizing QL code by grouping together related types, predicates, and other modules.</p>
<p>You can import modules into other files, which avoids duplication, and helps
structure your code into more manageable pieces.</p>
<div class="section" id="defining-a-module">
<span id="defining-module"></span><h2>Defining a module<a class="headerlink" href="#defining-a-module" title="Permalink to this headline">¶</a></h2>
<p>There are various ways to define modules—here is an example of the simplest way, declaring an
<a class="reference internal" href="#explicit-modules"><span class="std std-ref">explicit module</span></a> named <code class="docutils literal notranslate"><span class="pre">Example</span></code> containing
a class <code class="docutils literal notranslate"><span class="pre">OneTwoThree</span></code>:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="k">module</span> <span class="n">Example</span> <span class="p">{</span>
  <span class="k">class</span> <span class="n">OneTwoThree</span> <span class="k">extends</span> <span class="kt">int</span> <span class="p">{</span>
    <span class="n">OneTwoThree</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span> <span class="o">=</span> <span class="m">1</span> <span class="k">or</span> <span class="k">this</span> <span class="o">=</span> <span class="m">2</span> <span class="k">or</span> <span class="k">this</span> <span class="o">=</span> <span class="m">3</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The name of a module can be any <a class="reference external" href="https://codeql.github.com/docs/ql-language-reference/ql-language-specification/#identifiers">identifier</a>
that starts with an uppercase or lowercase letter.</p>
<p><code class="docutils literal notranslate"><span class="pre">.ql</span></code> or <code class="docutils literal notranslate"><span class="pre">.qll</span></code> files also implicitly define modules.
For more information, see “<a class="reference internal" href="#kinds-of-modules"><span class="std std-ref">Kinds of modules</span></a>.”</p>
<p>You can also annotate a module. For more information, see of “<a class="reference internal" href="annotations.html#annotations-overview"><span class="std std-ref">Overview of annotations</span></a>.”</p>
<p>Note that you can only annotate <a class="reference internal" href="#explicit-modules"><span class="std std-ref">explicit modules</span></a>.
File modules cannot be annotated.</p>
</div>
<div class="section" id="kinds-of-modules-1">
<span id="kinds-of-modules"></span><h2>Kinds of modules<a class="headerlink" href="#kinds-of-modules-1" title="Permalink to this headline">¶</a></h2>
<div class="section" id="file-modules">
<h3>File modules<a class="headerlink" href="#file-modules" title="Permalink to this headline">¶</a></h3>
<p>Each query file (extension <code class="docutils literal notranslate"><span class="pre">.ql</span></code>) and library file (extension <code class="docutils literal notranslate"><span class="pre">.qll</span></code>) implicitly defines
a module. The module has the same name as the file, but any spaces in the file name are replaced
by underscores (<code class="docutils literal notranslate"><span class="pre">_</span></code>). The contents of the file form the <a class="reference internal" href="#module-bodies"><span class="std std-ref">body of the module</span></a>.</p>
<div class="section" id="library-modules-1">
<span id="library-modules"></span><h4>Library modules<a class="headerlink" href="#library-modules-1" title="Permalink to this headline">¶</a></h4>
<p>A library module is defined by a <code class="docutils literal notranslate"><span class="pre">.qll</span></code> file. It can contain any of the
elements listed in <a class="reference internal" href="#module-bodies"><span class="std std-ref">Module bodies</span></a> below, apart from select clauses.</p>
<p>For example, consider the following QL library:</p>
<p><strong>OneTwoThreeLib.qll</strong></p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="n">OneTwoThree</span> <span class="k">extends</span> <span class="kt">int</span> <span class="p">{</span>
  <span class="n">OneTwoThree</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span> <span class="o">=</span> <span class="m">1</span> <span class="k">or</span> <span class="k">this</span> <span class="o">=</span> <span class="m">2</span> <span class="k">or</span> <span class="k">this</span> <span class="o">=</span> <span class="m">3</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This file defines a library module named <code class="docutils literal notranslate"><span class="pre">OneTwoThreeLib</span></code>. The body of this module
defines the class <code class="docutils literal notranslate"><span class="pre">OneTwoThree</span></code>.</p>
</div>
<div class="section" id="query-modules-1">
<span id="query-modules"></span><h4>Query modules<a class="headerlink" href="#query-modules-1" title="Permalink to this headline">¶</a></h4>
<p>A query module is defined by a <code class="docutils literal notranslate"><span class="pre">.ql</span></code> file. It can contain any of the elements listed
in <a class="reference internal" href="#module-bodies"><span class="std std-ref">Module bodies</span></a> below.</p>
<p>Query modules are slightly different from other modules:</p>
<ul class="simple">
<li>A query module can’t be imported.</li>
<li>A query module must have at least one query in its
<a class="reference internal" href="name-resolution.html#namespaces"><span class="std std-ref">namespace</span></a>. This is usually a <a class="reference internal" href="queries.html#select-clauses"><span class="std std-ref">select clause</span></a>,
but can also be a <a class="reference internal" href="queries.html#query-predicates"><span class="std std-ref">query predicate</span></a>.</li>
</ul>
<p>For example:</p>
<p><strong>OneTwoQuery.ql</strong></p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="n">OneTwoThreeLib</span>

<span class="k">from</span> <span class="n">OneTwoThree</span> <span class="n">ott</span>
<span class="k">where</span> <span class="n">ott</span> <span class="o">=</span> <span class="m">1</span> <span class="k">or</span> <span class="n">ott</span> <span class="o">=</span> <span class="m">2</span>
<span class="k">select</span> <span class="n">ott</span>
</pre></div>
</div>
<p>This file defines a query module named <code class="docutils literal notranslate"><span class="pre">OneTwoQuery</span></code>. The body of this module consists of an
<a class="reference internal" href="#importing-modules"><span class="std std-ref">import statement</span></a> and a <a class="reference internal" href="queries.html#select-clauses"><span class="std std-ref">select clause</span></a>.</p>
</div>
</div>
<div class="section" id="explicit-modules-1">
<span id="explicit-modules"></span><h3>Explicit modules<a class="headerlink" href="#explicit-modules-1" title="Permalink to this headline">¶</a></h3>
<p>You can also define a module within another module. This is an explicit module definition.</p>
<p>An explicit module is defined with the keyword <code class="docutils literal notranslate"><span class="pre">module</span></code> followed by
the module name, and then the module body enclosed in braces. It can contain any
of the elements listed in “<a class="reference internal" href="#module-bodies"><span class="std std-ref">Module bodies</span></a>” below, apart from select clauses.</p>
<p>For example, you could add the following QL snippet to the library file <strong>OneTwoThreeLib.qll</strong>
defined <a class="reference internal" href="#library-modules"><span class="std std-ref">above</span></a>:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="p">...</span>
<span class="k">module</span> <span class="n">M</span> <span class="p">{</span>
  <span class="k">class</span> <span class="n">OneTwo</span> <span class="k">extends</span> <span class="n">OneTwoThree</span> <span class="p">{</span>
    <span class="n">OneTwo</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span> <span class="o">=</span> <span class="m">1</span> <span class="k">or</span> <span class="k">this</span> <span class="o">=</span> <span class="m">2</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This defines an explicit module named <code class="docutils literal notranslate"><span class="pre">M</span></code>. The body of this module defines
the class <code class="docutils literal notranslate"><span class="pre">OneTwo</span></code>.</p>
</div>
<div class="section" id="parameterized-modules-1">
<span id="parameterized-modules"></span><h3>Parameterized modules<a class="headerlink" href="#parameterized-modules-1" title="Permalink to this headline">¶</a></h3>
<p>Parameterized modules are QL’s approach to generic programming.
Similar to explicit modules, parameterized modules are defined within other modules using the keyword <code class="docutils literal notranslate"><span class="pre">module</span></code>.
In addition to the module name, parameterized modules declare one or more parameters between the name and the module body.</p>
<p>For example, consider the module <code class="docutils literal notranslate"><span class="pre">M</span></code>, which takes two predicate parameters and defines a new predicate
that applies them one after the other:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="k">module</span> <span class="n">M</span><span class="o">&lt;</span><span class="n">transformer</span><span class="o">/</span><span class="m">1</span> <span class="n">first</span><span class="p">,</span> <span class="n">transformer</span><span class="o">/</span><span class="m">1</span> <span class="n">second</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="kr">bindingset[x]</span>
  <span class="kt">int</span> <span class="n">applyBoth</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">result</span> <span class="o">=</span> <span class="n">second</span><span class="p">(</span><span class="n">first</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Parameterized modules cannot be directly referenced.
Instead, you instantiate a parameterized module by passing arguments enclosed in angle brackets (<code class="docutils literal notranslate"><span class="pre">&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>) to the module.
Instantiated parameterized modules can be used as a <a class="reference internal" href="name-resolution.html#name-resolution"><span class="std std-ref">module expression</span></a>, identical to explicit module references.</p>
<p>For example, we can instantiate <code class="docutils literal notranslate"><span class="pre">M</span></code> with two identical arguments <code class="docutils literal notranslate"><span class="pre">increment</span></code>, creating a module
containing a predicate that adds 2:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="kr">bindingset[result] bindingset[x]</span>
<span class="kt">int</span> <span class="n">increment</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span> <span class="k">result</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="m">1</span> <span class="p">}</span>

<span class="k">module</span> <span class="n">IncrementTwice</span> <span class="o">=</span> <span class="n">M</span><span class="o">&lt;</span><span class="n">increment</span><span class="o">/</span><span class="m">1</span><span class="p">,</span> <span class="n">increment</span><span class="o">/</span><span class="m">1</span><span class="o">&gt;</span><span class="p">;</span>

<span class="k">select</span> <span class="n">IncrementTwice</span><span class="o">::</span><span class="n">applyBoth</span><span class="p">(</span><span class="m">40</span><span class="p">)</span> <span class="c1">// 42</span>
</pre></div>
</div>
<p>The parameters of a parameterized module are (meta-)typed with <a class="reference internal" href="signatures.html#signatures"><span class="std std-ref">signatures</span></a>.</p>
<p>For example, in the previous two snippets, we relied on the predicate signature <code class="docutils literal notranslate"><span class="pre">transformer</span></code>:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="kr">bindingset[x]</span>
<span class="n">signature</span> <span class="kt">int</span> <span class="n">transformer</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">);</span>
</pre></div>
</div>
<p>The instantiation of parameterized modules is applicative.
That is, if you instantiate a parameterized module twice with identical arguments, the resulting object is the same.
This is particularly relevant for type definitions inside parameterized modules as <a class="reference internal" href="types.html#classes"><span class="std std-ref">classes</span></a>
or via <a class="reference internal" href="types.html#algebraic-datatypes"><span class="std std-ref">newtype</span></a>, because the duplication of such type definitions would result in
incompatible types.</p>
<p>The following example instantiates module <code class="docutils literal notranslate"><span class="pre">M</span></code> inside calls to predicate <code class="docutils literal notranslate"><span class="pre">foo</span></code> twice.
The first call is valid but the second call generates an error.</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="kr">bindingset[this]</span>
<span class="n">signature</span> <span class="k">class</span> <span class="n">TSig</span><span class="p">;</span>

<span class="k">module</span> <span class="n">M</span><span class="o">&lt;</span><span class="n">TSig</span> <span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="k">newtype</span> <span class="n">A</span> <span class="o">=</span> <span class="n">B</span><span class="p">()</span> <span class="k">or</span> <span class="n">C</span><span class="p">()</span>
<span class="p">}</span>

<span class="kt">string</span> <span class="n">foo</span><span class="p">(</span><span class="n">M</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">A</span> <span class="n">a</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>

<span class="k">select</span> <span class="n">foo</span><span class="p">(</span><span class="n">M</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">B</span><span class="p">()),</span>  <span class="c1">// valid: repeated identical instantiation of M does not duplicate A, B, C</span>
       <span class="n">foo</span><span class="p">(</span><span class="n">M</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;::</span><span class="n">B</span><span class="p">())</span> <span class="c1">// ERROR: M&lt;float&gt;::B is not compatible with M&lt;int&gt;::A</span>
</pre></div>
</div>
<p>Module parameters are dependently typed, meaning that signature expressions in parameter definitions can reference
preceding parameters.</p>
<p>For example, we can declare the signature for <code class="docutils literal notranslate"><span class="pre">T2</span></code> dependent on <code class="docutils literal notranslate"><span class="pre">T1</span></code>, enforcing a subtyping relationship
between the two parameters:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="n">signature</span> <span class="k">class</span> <span class="n">TSig</span><span class="p">;</span>

<span class="k">module</span> <span class="n">Extends</span><span class="o">&lt;</span><span class="n">TSig</span> <span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span> <span class="n">signature</span> <span class="k">class</span> <span class="n">Type</span> <span class="k">extends</span> <span class="n">T</span><span class="p">;</span> <span class="p">}</span>

<span class="k">module</span> <span class="n">ParameterizedModule</span><span class="o">&lt;</span><span class="n">TSig</span> <span class="n">T</span><span class="m">1</span><span class="p">,</span> <span class="n">Extends</span><span class="o">&lt;</span><span class="n">T</span><span class="m">1</span><span class="o">&gt;::</span><span class="n">Type</span> <span class="n">T</span><span class="m">2</span><span class="o">&gt;</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
</pre></div>
</div>
<p>Dependently typed parameters are particularly useful in combination with
<a class="reference internal" href="signatures.html#parameterized-module-signatures"><span class="std std-ref">parameterized module signatures</span></a>.</p>
</div>
</div>
<div class="section" id="module-bodies-1">
<span id="module-bodies"></span><h2>Module bodies<a class="headerlink" href="#module-bodies-1" title="Permalink to this headline">¶</a></h2>
<p>The body of a module is the code inside the module definition, for example
the class <code class="docutils literal notranslate"><span class="pre">OneTwo</span></code> in the <a class="reference internal" href="#explicit-modules"><span class="std std-ref">explicit module</span></a> <code class="docutils literal notranslate"><span class="pre">M</span></code>.</p>
<p>In general, the body of a module can contain the following constructs:</p>
<ul class="simple">
<li><a class="reference internal" href="#import-statements"><span class="std std-ref">Import statements</span></a></li>
<li><a class="reference internal" href="predicates.html#predicates"><span class="std std-ref">Predicates</span></a></li>
<li><a class="reference internal" href="types.html#types"><span class="std std-ref">Types</span></a> (including user-defined <a class="reference internal" href="types.html#classes"><span class="std std-ref">classes</span></a>)</li>
<li><a class="reference internal" href="aliases.html#aliases"><span class="std std-ref">Aliases</span></a></li>
<li><a class="reference internal" href="#explicit-modules"><span class="std std-ref">Explicit modules</span></a></li>
<li><a class="reference internal" href="queries.html#select-clauses"><span class="std std-ref">Select clauses</span></a> (only available in a <a class="reference internal" href="#query-modules"><span class="std std-ref">query module</span></a>)</li>
</ul>
</div>
<div class="section" id="importing-modules-1">
<span id="importing-modules"></span><span id="index-0"></span><h2>Importing modules<a class="headerlink" href="#importing-modules-1" title="Permalink to this headline">¶</a></h2>
<p>The main benefit of storing code in a module is that you can reuse it in other modules.
To access the contents of an external module, you can import the module using an
<a class="reference internal" href="#import-statements"><span class="std std-ref">import statement</span></a>.</p>
<p>When you import a module this brings all the names in its namespace, apart from <a class="reference internal" href="annotations.html#private"><span class="std std-ref">private</span></a> names,
into the <a class="reference internal" href="name-resolution.html#namespaces"><span class="std std-ref">namespace</span></a> of the current module.</p>
<div class="section" id="import-statements-1">
<span id="import-statements"></span><h3>Import statements<a class="headerlink" href="#import-statements-1" title="Permalink to this headline">¶</a></h3>
<p>Import statements are used for importing modules. They are of the form:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="o">&lt;</span><span class="n">module_expression</span><span class="m">1</span><span class="o">&gt;</span> <span class="k">as</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span>
<span class="k">import</span> <span class="o">&lt;</span><span class="n">module_expression</span><span class="m">2</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Import statements are usually listed at the beginning of the module. Each
import statement imports one module. You can import multiple modules by
including multiple import statements (one for each module you want to import).</p>
<p>An import statement can also be <a class="reference internal" href="annotations.html#annotations-overview"><span class="std std-ref">annotated</span></a> with
<code class="docutils literal notranslate"><span class="pre">private</span></code> or <code class="docutils literal notranslate"><span class="pre">deprecated</span></code>. If an import statement is annotated with
<code class="docutils literal notranslate"><span class="pre">private</span></code> then the imported names are not reexported. If an imported name is
only reachable through deprecated imports in a given context then usage of the
name in that context will generate deprecation warnings.</p>
<p>You can import a module under a different name using the <code class="docutils literal notranslate"><span class="pre">as</span></code> keyword,
for example <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">javascript</span> <span class="pre">as</span> <span class="pre">js</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;module_expression&gt;</span></code> itself can be a module name, a selection, or a qualified
reference. For more information, see “<a class="reference internal" href="name-resolution.html#name-resolution"><span class="std std-ref">Name resolution</span></a>.”</p>
<p>For information about how import statements are looked up, see “<a class="reference external" href="https://codeql.github.com/docs/ql-language-reference/ql-language-specification/#module-resolution">Module resolution</a>”
in the QL language specification.</p>
</div>
</div>
<div class="section" id="built-in-modules">
<h2>Built-in modules<a class="headerlink" href="#built-in-modules" title="Permalink to this headline">¶</a></h2>
<p>QL defines a <code class="docutils literal notranslate"><span class="pre">QlBuiltins</span></code> module that is always in scope.
Currently, it defines a single parameterized sub-module
<code class="docutils literal notranslate"><span class="pre">EquivalenceRelation</span></code>, that provides an efficient abstraction for working with
(partial) equivalence relations in QL.</p>
<div class="section" id="equivalence-relations">
<h3>Equivalence relations<a class="headerlink" href="#equivalence-relations" title="Permalink to this headline">¶</a></h3>
<p>The built-in <code class="docutils literal notranslate"><span class="pre">EquivalenceRelation</span></code> module is parameterized by a type <code class="docutils literal notranslate"><span class="pre">T</span></code> and a
binary base relation <code class="docutils literal notranslate"><span class="pre">base</span></code> on <code class="docutils literal notranslate"><span class="pre">T</span></code>. The symmetric and transitive closure of <code class="docutils literal notranslate"><span class="pre">base</span></code>
induces a partial equivalence relation on <code class="docutils literal notranslate"><span class="pre">T</span></code>. If every value of <code class="docutils literal notranslate"><span class="pre">T</span></code> appears in
<code class="docutils literal notranslate"><span class="pre">base</span></code>, then the induced relation is an equivalence relation on <code class="docutils literal notranslate"><span class="pre">T</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">EquivalenceRelation</span></code> module exports a <code class="docutils literal notranslate"><span class="pre">getEquivalenceClass</span></code> predicate that
gets the equivalence class, if any, associated with a given <code class="docutils literal notranslate"><span class="pre">T</span></code> element by the
(partial) equivalence relation induced by <code class="docutils literal notranslate"><span class="pre">base</span></code>.</p>
<p>The following example illustrates an application of the <code class="docutils literal notranslate"><span class="pre">EquivalenceRelation</span></code>
module to generate a custom equivalence relation:</p>
<div class="highlight-ql notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="n">Node</span> <span class="k">extends</span> <span class="kt">int</span> <span class="p">{</span>
  <span class="n">Node</span><span class="p">()</span> <span class="p">{</span> <span class="k">this</span> <span class="k">in</span> <span class="p">[</span><span class="m">1</span> <span class="p">..</span> <span class="m">6</span><span class="p">]</span> <span class="p">}</span>
<span class="p">}</span>

<span class="k">predicate</span> <span class="n">base</span><span class="p">(</span><span class="n">Node</span> <span class="n">x</span><span class="p">,</span> <span class="n">Node</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">x</span> <span class="o">=</span> <span class="m">1</span> <span class="k">and</span> <span class="n">y</span> <span class="o">=</span> <span class="m">2</span>
  <span class="k">or</span>
  <span class="n">x</span> <span class="o">=</span> <span class="m">3</span> <span class="k">and</span> <span class="n">y</span> <span class="o">=</span> <span class="m">4</span>
<span class="p">}</span>

<span class="k">module</span> <span class="n">Equiv</span> <span class="o">=</span> <span class="n">QlBuiltins</span><span class="o">::</span><span class="n">EquivalenceRelation</span><span class="o">&lt;</span><span class="n">Node</span><span class="p">,</span> <span class="n">base</span><span class="o">/</span><span class="m">2</span><span class="o">&gt;</span><span class="p">;</span>

<span class="k">from</span> <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span>
<span class="k">where</span> <span class="n">Equiv</span><span class="o">::</span><span class="n">getEquivalenceClass</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">=</span> <span class="n">Equiv</span><span class="o">::</span><span class="n">getEquivalenceClass</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="k">select</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
</pre></div>
</div>
<p>Since <code class="docutils literal notranslate"><span class="pre">base</span></code> does not relate <code class="docutils literal notranslate"><span class="pre">5</span></code> or <code class="docutils literal notranslate"><span class="pre">6</span></code> to any nodes, the induced
relation is a partial equivalence relation on <code class="docutils literal notranslate"><span class="pre">Node</span></code> and does not relate <code class="docutils literal notranslate"><span class="pre">5</span></code>
or <code class="docutils literal notranslate"><span class="pre">6</span></code> to any nodes either.</p>
<p>The above select clause returns the following partial equivalence relation:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">x</th>
<th class="head">y</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>2</td>
</tr>
<tr class="row-even"><td>2</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>2</td>
</tr>
<tr class="row-even"><td>3</td>
<td>3</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>4</td>
</tr>
<tr class="row-even"><td>4</td>
<td>3</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


    </article>

    <!-- GitHub footer, with links to terms and privacy statement -->
    <div class="px-3 px-md-6 f6 py-4 d-sm-flex flex-justify-between flex-row-reverse flex-items-center border-top">
        <ul class="list-style-none d-flex flex-items-center mb-3 mb-sm-0 lh-condensed-ultra">
            <li class="mr-3">
                <a href="https://twitter.com/github" title="GitHub on Twitter" style="color: #959da5;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 273.5 222.3" class="d-block" height="18">
                        <path
                            d="M273.5 26.3a109.77 109.77 0 0 1-32.2 8.8 56.07 56.07 0 0 0 24.7-31 113.39 113.39 0 0 1-35.7 13.6 56.1 56.1 0 0 0-97 38.4 54 54 0 0 0 1.5 12.8A159.68 159.68 0 0 1 19.1 10.3a56.12 56.12 0 0 0 17.4 74.9 56.06 56.06 0 0 1-25.4-7v.7a56.11 56.11 0 0 0 45 55 55.65 55.65 0 0 1-14.8 2 62.39 62.39 0 0 1-10.6-1 56.24 56.24 0 0 0 52.4 39 112.87 112.87 0 0 1-69.7 24 119 119 0 0 1-13.4-.8 158.83 158.83 0 0 0 86 25.2c103.2 0 159.6-85.5 159.6-159.6 0-2.4-.1-4.9-.2-7.3a114.25 114.25 0 0 0 28.1-29.1"
                            fill="currentColor"></path>
                    </svg>
                </a>
            </li>
            <li class="mr-3">
                <a href="https://www.facebook.com/GitHub" title="GitHub on Facebook" style="color: #959da5;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15.3 15.4" class="d-block" height="18">
                        <path
                            d="M14.5 0H.8a.88.88 0 0 0-.8.9v13.6a.88.88 0 0 0 .8.9h7.3v-6h-2V7.1h2V5.4a2.87 2.87 0 0 1 2.5-3.1h.5a10.87 10.87 0 0 1 1.8.1v2.1h-1.3c-1 0-1.1.5-1.1 1.1v1.5h2.3l-.3 2.3h-2v5.9h3.9a.88.88 0 0 0 .9-.8V.8a.86.86 0 0 0-.8-.8z"
                            fill="currentColor"></path>
                    </svg>
                </a>
            </li>
            <li class="mr-3">
                <a href="https://www.youtube.com/github" title="GitHub on YouTube" style="color: #959da5;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.17 13.6" class="d-block" height="16">
                        <path
                            d="M18.77 2.13A2.4 2.4 0 0 0 17.09.42C15.59 0 9.58 0 9.58 0a57.55 57.55 0 0 0-7.5.4A2.49 2.49 0 0 0 .39 2.13 26.27 26.27 0 0 0 0 6.8a26.15 26.15 0 0 0 .39 4.67 2.43 2.43 0 0 0 1.69 1.71c1.52.42 7.5.42 7.5.42a57.69 57.69 0 0 0 7.51-.4 2.4 2.4 0 0 0 1.68-1.71 25.63 25.63 0 0 0 .4-4.67 24 24 0 0 0-.4-4.69zM7.67 9.71V3.89l5 2.91z"
                            fill="currentColor"></path>
                    </svg>
                </a>
            </li>
            <li class="mr-3 flex-self-start">
                <a href="https://www.linkedin.com/company/github" title="GitHub on Linkedin" style="color: #959da5;">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19 18" class="d-block" height="18">
                        <path
                            d="M3.94 2A2 2 0 1 1 2 0a2 2 0 0 1 1.94 2zM4 5.48H0V18h4zm6.32 0H6.34V18h3.94v-6.57c0-3.66 4.77-4 4.77 0V18H19v-7.93c0-6.17-7.06-5.94-8.72-2.91z"
                            fill="currentColor"></path>
                    </svg>
                </a>
            </li>
            <li>
                <a href="https://github.com/github" title="GitHub's organization" style="color: #959da5;">
                    <svg version="1.1" width="20" height="20" viewBox="0 0 16 16" class="octicon octicon-mark-github"
                        aria-hidden="true">
                        <path fill-rule="evenodd"
                            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
                        </path>
                    </svg>
                </a>
            </li>
        </ul>
        <ul class="list-style-none d-flex text-gray">
            <li class="mr-3">&copy; 
                <script type="text/javascript">document.write(new Date().getFullYear());</script> GitHub, Inc.</li>
            <li class="mr-3"><a
                    href="https://docs.github.com/github/site-policy/github-terms-of-service"
                    class="link-gray">Terms </a></li>
            <li><a href="https://docs.github.com/github/site-policy/github-privacy-statement"
                    class="link-gray">Privacy </a></li>
        </ul>
    </div>
</div>
</main>

<script type="text/javascript">
    $(document).ready(function () {
        $(".toggle > *").hide();
        $(".toggle .name").show();
        $(".toggle .name").click(function () {
            $(this).parent().children().not(".name").toggle(400);
            $(this).parent().children(".name").toggleClass("open");
        })
    });
</script>

  </body>
</html>